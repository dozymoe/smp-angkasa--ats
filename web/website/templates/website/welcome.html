{% extends "base-anon.html" %}
{% load i18n %}
{% load carbondesign website %}

{% block body_classes %}front-page{% endblock %}


{% block content %}
  {% Grid %}
    {% Row %}
      {% Col lg=8 %}
        {% Grid class="ph-0" %}
          {% Row %}
            {% Col lg=12 %}
              <h2>{% trans "Latest News" %}</h2>
            {% endCol %}
          {% endRow %}
          {% Row tag="ul" class="front-blog-posts" %}
            {% for obj in blogposts %}
              {% Col lg=6 tag="li" role="article" %}
                {% if obj.image %}
                  <img src="{{obj.get_image_url}}"
                      srcset="{{obj.get_html_attr_srcset}}"
                      sizes="{{obj.get_html_attr_sizes}}"
                      class="img-responsive">
                {% endif %}
                <h3>{{obj.title}}</h3>
                <p>
                  {% trans "Posted on" %}
                  <time datetime="{{ obj.published_at }}">
                    {{ obj.published_at | date:'j F' }}
                  </time>.
                </p>
                {{ obj.summary | restify }}
                <footer>
                  <a href="{{obj.get_absolute_url}}">
                    {% trans "Read more" %}
                  </a>
                </footer>
              {% endCol %}
            {% endfor %}
          {% endRow %}
        {% endGrid %}
      {% endCol %}

      {% Col lg=4 %}
        {% Grid class="ph-0" %}
          {% Row %}
            {% Col lg=12 %}
              <h2>{% trans "Events" %}</h2>
            {% endCol %}
          {% endRow %}
          {% Row tag="ul" class="font-events" %}
            {% for obj in events %}
              {% Col lg=6 tag="li" role="article" %}
                <h3>{{obj.title}}</h3>
                <p>
                  {% trans "Started at" %}
                  <time datetime="{{obj.started_at}}">
                    {{ obj.started_at | date:'j F' }}
                  </time>
                  {% if obj.stopped_at %}
                    <br/>
                    {% trans "Stopped at" %}
                    <time datetime="{{obj.stopped_at}}">
                      {{ obj.stopped_at | date:'j F' }}
                    </time>
                  {% endif %}
                </p>
                {{ obj.summary | restify }}
                <footer>
                  <a href="{{obj.get_absolute_url}}">
                    {% trans "Read more" %}
                  </a>
                </footer>
              {% endCol %}
            {% endfor %}
          {% endRow %}
        {% endGrid %}
      {% endCol %}
    {% endRow %}
  {% endGrid %}
{% endblock %}


{% block banner %}
  {% if slides %}
    <div class="carousel"
        data-flickity='{"lazyLoad":true, "autoPlay":true, "fade":true}'>
      {% for slide in slides %}
        <div class="carousel-cell">
          <img data-flickity-lazyload="{{slide.image.get_absolute_url}}"
              srcset="{{slide.image.get_html_attr_srcset}}"
              sizes="{{slide.image.get_html_attr_sizes}}"
              alt="{{slide.description}}" class="carousel-cell-imagea" />
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if front_contents %}
    {% Grid class="featured-content" %}
      {% Row %}
        {% for content in front_contents %}
          {% Col lg=4 %}
            <h2>
              <a href="{{content.content.get_absolute_url}}">
                {{content.content.title}}
              </a>
            </h2>
            {{content.content.summary | restify}}
          {% endCol %}
        {% endfor %}
      {% endRow %}
    {% endGrid %}
  {% endif %}
{% endblock %}
