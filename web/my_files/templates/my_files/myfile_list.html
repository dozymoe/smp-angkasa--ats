{% extends 'base_drawer-admin.html' %}
{% load i18n %}
{% load materialweb website %}

{% block head_title %}{% trans "Manage Files" %}{% endblock %}
{% block drawer_title %}{% trans "Files" %}{% endblock %}


{% block content %}
<div class="mdc-layout-grid__cell--span-12">
  <p>{% trans "Embedding files into your articles. Example:" %}</p>
  <pre><code>
Previous paragraph

.. webfile:: 4
   :alt: Short description of the image
   :height: 100
   :width: 200

Next paragraph
  </code></pre>
  <p>{% trans "The number <strong>4</strong> is from the ID column below, and <strong>alt</strong>, <strong>height</strong>, <strong>width</strong> were optional." %}</p>
</div>

<div class="mdc-layout-grid__cell--span-12">
  {% trans "Files" as label %}
  {% Table row_selectable=True label=label class="w-100" %}
    {% Table_Head %}
      {% Table_Head_Row %}
        {% Table_Head_Col %}
          {% trans "ID" %}
        {% endTable_Head_Col %}
        {% Table_Head_Col %}
          {% trans "Filename" %}
        {% endTable_Head_Col %}

        {% trans "Operations" as label %}
        {% Table_Head_Col class="autofit" %}
          <span aria-label="{{label}}"></span>
        {% endTable_Head_Col %}
      {% endTable_Head_Row %}
    {% endTable_Head %}

    {% Table_Body %}
      {% for obj in object_list %}
        {% Table_Row %}
          {% Table_Col %}
            {{ obj.pk }}
          {% endTable_Col %}

          {% Table_ColHeader %}
            <a href="{{ obj.databits.url }}" target="_blank">
              {{ obj.get_filename }}
            </a>
          {% endTable_ColHeader %}

          {% Table_Col %}
            {% html_id 'menuops-' obj.pk as menu_id %}
            {% Menu_Anchor %}
              {% trans "Open Menu" as label %}
              {% IconButton type="button" label=label data-provide-menu=menu_id aria-has-popup="menu" class="material-icons" %}
                more_vert
              {% endIconButton %}

              {% Menu id=menu_id %}
                {% List tag="nav" %}
                  {% List_Item tag="a" href=obj.databits.url tabindex="0" target="_blank" %}
                    {% List_Image class="material-icons" %}
                      file_download
                    {% endList_Image %}
                    {% List_Text %}
                      {% trans "Download" %}
                    {% endList_Text %}
                  {% endList_Item %}

                  {% List_Divider %}

                  {% url 'MyFile:Destroy' obj.pk as url %}
                  {% List_Item tag="a" href=url tabindex="1" %}
                    {% List_Image class="material-icons" %}
                      delete
                    {% endList_Image %}
                    {% List_Text %}
                      {% trans "Delete" %}
                    {% endList_Text %}
                  {% endList_Item %}
                {% endList %}
              {% endMenu %}
            {% endMenu_Anchor %}
          {% endTable_Col %}
        {% endTable_Row %}
      {% endfor %}
    {% endTable_Body %}
  {% endTable %}
</div>
{% endblock %}


{% block topbar_left %}
  {% url 'Home' as url %}
  {% trans "Home Page" as label %}
  {% IconButton tag="a" href=url label=label class="material-icons" %}
    arrow_back
  {% endIconButton %}
{% endblock %}


{% block topbar_right %}
  {% url 'MyFile:Create' as url %}
  {% trans "Create File" as label %}
  {% IconButton tag="a" href=url label=label class="material-icons" %}
    add
  {% endIconButton %}
{% endblock %}


{% block drawer %}
  {% url 'MyFile:Index' as url %}
  {% List_Item tag="a" href=url tabindex="0" %}
    {% List_Image class="material-icons" %}
      toc
    {% endList_Image %}
    {% List_Text %}
      {% trans "Index" %}
    {% endList_Text %}
  {% endList_Item %}

  {% url 'MyFile:Create' as url %}
  {% List_Item tag="a" href=url tabindex="1" %}
    {% List_Image class="material-icons" %}
      add
    {% endList_Image %}
    {% List_Text %}
      {% trans "Create" %}
    {% endList_Text %}
  {% endList_Item %}
{% endblock %}
